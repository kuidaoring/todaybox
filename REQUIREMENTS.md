# TODO管理ツール要件

このドキュメントは、最低限「まともな」TODO管理ツールとして成立させるための要件を整理したものです。
色や装飾よりも、機能性・信頼性・運用性を重視します。

## 1. 基本機能
- タスクの追加/編集/削除ができる。
- タスクの完了/未完了を切り替えできる。
- タスクの期限（任意）を設定できる。
- タスクにメモ（プレーンテキスト）を保存できる。
- 繰り返し設定ができる（週次/複数曜日、月次/日付）。
- タスクの一覧を表示できる。
- タスクの詳細を表示できる（一覧の各行を展開して表示）。

## 2. 操作性/UX
- 主要な操作が1画面内で完結する。
- 完了/未完了のセクション折りたたみは使わず、単一リストで表示する。
- タスク詳細はリスト行の `summary/details` 展開で操作できる。
- 空状態（タスクがない）を明示する。
- フィルタや表示切替の状態が分かる。
- 入力フォームのバリデーションがある（空文字禁止など）。
- 連続登録や編集が負担にならない（入力後のフォーカス維持など）。

## 3. データ管理
- データが永続化される（再起動で消えない）。
- 一意なIDでタスクを管理する。
- 作成日時や更新日時を保持する。
- 繰り返し元タスクの完了時に、次回期日のタスクを自動生成できる。

## 3.1 繰り返し設定仕様
- 繰り返し設定は `週次` と `月次` の排他設定とする（同時設定不可）。
- 週次は曜日を複数選択できる。
- 月次は日付を1つだけ選択できる。
- 月次で存在しない日付（29/30/31など）は、その月の末日に繰り下げる。
- タスク完了時にのみ次回タスクを1件自動生成する（cron等での定期生成はしない）。
- 完了済みタスクを未完了に戻して再度完了しても、次回タスクは再生成しない（元タスクあたり1回のみ生成）。
- 自動生成タスクの引き継ぎ項目は `title` / `memo` / `繰り返し設定` とする。
- 自動生成タスクの初期値は `completed=false` / `isToday=false` / `createdAt=now` / `completedAt=undefined` / `dueDate=次回日` とする。

## 4. 表示/フィルタ
- 完了/未完了のフィルタができる。
- 期限が近い/過ぎたタスクを識別できる。
- ソート（作成順、期限順）ができる。
- 日付ラベルは「昨日/今日/明日」を優先表示できる。

## 5. 安全性/信頼性
- 不正入力をサーバー側で防ぐ。
- 例外時の挙動が破綻しない（空データ、無効IDなど）。
- 重要操作（削除など）に確認を入れる。

## 6. ステータスと通知
- 期限切れが分かる（表示上のマークや区分）。
- 今日のタスク/今週のタスクの簡易確認ができる。
- Macのメニューバーに今日のタスクを表示できる。

## 7. 拡張性
- ラベル/タグを付けられる。
- 検索ができる。
- 複数リストやプロジェクト単位で管理できる。

## 8. 運用要件
- バックアップ/エクスポートができる（CSV/JSONなど）。
- インポートに対応できる。

## 9. 非機能要件
- 応答が速い（数百件規模でもストレスがない）。
- 主要ブラウザで動作する。
- アクセシビリティを配慮する（フォーカス、ラベル等）。

## 10. 最小構成（MVP）
最小限まともと呼べる構成は以下。
- 追加/編集/削除
- 完了切替
- 期限設定
- 永続化
- フィルタ（完了/未完了）
- 空状態の表示

## 11. 優先度付きタスクリスト（進捗）
ステータスは「未着手 / 進行中 / 完了 / 一部対応」で管理する。

| 番号 | 優先度 | タスク | ステータス | メモ |
| --- | --- | --- | --- | --- |
| 1 | P0 | タスクの追加 | 完了 | 追加フォームあり。 |
| 2 | P0 | タスクの削除 | 完了 | 削除確認ダイアログ付きで対応。 |
| 3 | P0 | タスクの編集 | 未着手 | タイトルや期限の直接編集が必要。 |
| 4 | P0 | 完了/未完了の切替 | 完了 | 一覧から切替可能。 |
| 5 | P0 | 期限設定 | 完了 | 個別に設定可能。 |
| 6 | P0 | 永続化 | 未着手 | 再起動でデータが消える。 |
| 7 | P0 | 完了/未完了のフィルタ | 完了 | 未完了/完了で分けて表示。 |
| 8 | P0 | 空状態の表示 | 完了 | 一覧が空のときに表示。 |
| 9 | P1 | 詳細の表示/閉じる | 完了 | 各タスク行を展開して詳細を表示。 |
| 10 | P1 | フィルタの状態表示 | 完了 | 選択タブを太字/下線。 |
| 11 | P1 | ソート（期限順） | 完了 | 作成順/期限順の切替あり。 |
| 12 | P1 | 期限が近い/過ぎたタスクの識別 | 未着手 | 表示上の区分が必要。 |
| 13 | P1 | 削除の確認 | 完了 | 詳細内の削除ボタンで確認ダイアログを表示。 |
| 14 | P1 | 入力バリデーションの強化 | 一部対応 | タイトル空文字のみ抑止。 |
| 15 | P1 | メモ（プレーンテキスト）保存 | 完了 | 追加フォームと詳細表示に対応。 |
| 16 | P1 | 繰り返し設定（週次/複数曜日、月次/日付） | 一部対応 | 追加時設定と完了時次回1件生成に対応。既存タスクの繰り返し編集UIは未対応。 |
| 17 | P2 | 検索 | 未着手 | タイトル/タグ検索など。 |
| 18 | P2 | ラベル/タグ | 未着手 | タグ設計が必要。 |
| 19 | P2 | 複数リスト/プロジェクト | 未着手 | リスト単位の管理が必要。 |
| 20 | P2 | エクスポート/インポート | 未着手 | CSV/JSONなど。 |
| 21 | P2 | アクセシビリティ強化 | 一部対応 | aria-currentのみ対応。 |
| 22 | P2 | Macメニューバーに今日のタスク表示 | 未着手 | メニューバー表示と更新タイミングの設計が必要。 |
